## 2024-05-24 - Zip Slip Vulnerability in Model Management
**Vulnerability:** The `ModelManagement.decompress_to_cache` method used `tarfile.extractall()` without a `filter` argument. This allows a malicious `.tar.gz` file (e.g., from a compromised model source) to overwrite arbitrary files on the system by including members with path traversal characters (e.g., `../../etc/passwd`), known as the "Zip Slip" vulnerability.
**Learning:** Python's `tarfile` module (prior to 3.12/3.14 defaults) is not secure by default. Even when verifying file sizes/hashes (which happens after extraction or requires trusting the metadata), the extraction step itself is the vector. Explicitly setting `filter='data'` is required to sandbox extraction.
**Prevention:** Always use `filter='data'` (or `'tar'`) when extracting archives from untrusted sources. Additionally, enforcing strict permissions (0o700) on cache directories mitigates the impact if a file does escape or is accessed by other users on a shared system.
